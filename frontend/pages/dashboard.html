<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <link crossorigin="" href="https://fonts.gstatic.com/" rel="preconnect"/>
    <link as="style" href="https://fonts.googleapis.com/css2?display=swap&family=Inter%3Awght%40400%3B500%3B700%3B900&family=Noto+Sans%3Awght%40400%3B500%3B700%3B900" onload="this.rel='stylesheet'" rel="stylesheet"/>
    <title>Experian Kiosk - Challenge Hub</title>
    <link href="data:image/x-icon;base64," rel="icon" type="image/x-icon"/>
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <style type="text/tailwindcss">
        :root {
            --experian-blue: #007dc3;
            --experian-dark-blue: #002e5d;
            --experian-grey: #f0f2f5;
        }
        body {
            font-family: 'Inter', 'Noto Sans', sans-serif;
        }
        .card-hover {
            transition: all 0.3s ease;
        }
        .card-hover:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 25px rgba(0, 125, 195, 0.1);
        }
        .welcome-animation {
            animation: fadeInUp 0.6s ease-out;
        }
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="bg-[var(--experian-grey)]">
    <!-- Header -->
    <header class="sticky top-0 z-10 bg-white shadow-sm">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <!-- Combined UST | Experian Logo -->
                <div class="flex items-center">
                    <!-- UST Logo -->
                    <img src="/assets/images/ust-logo.png" 
                         alt="UST Logo" 
                         class="h-8 w-auto mr-2">
                    
                    <!-- Separator -->
                    <div class="text-gray-400 text-2xl font-light mx-2">|</div>
                    
                    <!-- Experian Logo -->
                    <img src="/assets/images/experian-logo.png" 
                         alt="Experian Logo" 
                         class="h-8 w-auto ml-2">
                    
                    <span class="ml-3 text-xl font-bold text-[var(--experian-dark-blue)]">Experian Kiosk</span>
                </div>
                
                <!-- User Info & Navigation -->
                <div class="flex items-center space-x-4">
                    <div class="flex items-center space-x-2">
                        <div class="w-8 h-8 bg-[var(--experian-blue)] rounded-full flex items-center justify-center">
                            <span class="text-white font-bold text-sm" id="userInitials">U</span>
                        </div>
                        <div>
                            <span class="text-gray-600 text-sm">Welcome,</span>
                            <span class="text-[var(--experian-dark-blue)] font-medium" id="username">User</span>
                        </div>
                    </div>
                    <button onclick="logout()" class="text-[var(--experian-blue)] hover:text-[var(--experian-dark-blue)] font-medium transition-colors">
                        Logout
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8">
        <!-- Welcome Section -->
        <div class="welcome-animation text-center mb-12">
            <h1 class="text-4xl font-bold text-[var(--experian-dark-blue)] mb-2">Challenge Hub</h1>
            <p class="text-gray-600 text-lg mb-4">Enhance your knowledge about Experian's business and products</p>
            <div class="text-sm text-gray-500">
                Session started: <span id="sessionTime">-</span>
            </div>
        </div>

        <!-- Main Action Cards -->
        <div class="grid md:grid-cols-2 gap-8 mb-12">
            <!-- Knowledge Challenge Card -->
            <div class="card-hover bg-white rounded-lg shadow-lg p-8 border-l-4 border-[var(--experian-blue)]">
                <div class="flex items-center mb-6">
                    <div class="bg-blue-100 p-4 rounded-lg">
                        <svg class="h-10 w-10 text-[var(--experian-blue)]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path>
                        </svg>
                    </div>
                    <div class="ml-4">
                        <h2 class="text-2xl font-semibold text-gray-800">Knowledge Challenge</h2>
                        <p class="text-gray-500">5 Questions • ~3 minutes</p>
                    </div>
                </div>
                <p class="text-gray-600 mb-8 leading-relaxed">Test your knowledge by answering questions about Experian's business, products, and industry insights. Get immediate feedback and explanations.</p>
                <button onclick="startQuiz()" class="w-full bg-[var(--experian-blue)] hover:bg-[var(--experian-dark-blue)] text-white font-semibold py-4 px-6 rounded-lg transition-colors transform hover:scale-105">
                    Start Challenge →
                </button>
            </div>

            <!-- Business Knowledge Center Card -->
            <div class="card-hover bg-white rounded-lg shadow-lg p-8 border-l-4 border-green-500">
                <div class="flex items-center mb-6">
                    <div class="bg-green-100 p-4 rounded-lg">
                        <svg class="h-10 w-10 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path>
                        </svg>
                    </div>
                    <div class="ml-4">
                        <h2 class="text-2xl font-semibold text-gray-800">Knowledge Center</h2>
                        <p class="text-gray-500">Coming Soon</p>
                    </div>
                </div>
                <p class="text-gray-600 mb-8 leading-relaxed">Access a comprehensive library of business documents, case studies, and information to enhance your understanding of Experian's ecosystem.</p>
                <button onclick="browseKnowledge()" class="w-full bg-green-600 hover:bg-green-700 text-white font-semibold py-4 px-6 rounded-lg transition-colors opacity-75 cursor-not-allowed">
                    Coming Soon
                </button>
            </div>
        </div>

        <!-- Quick Stats Section -->
        <div class="bg-white rounded-lg shadow-lg p-6 mb-8">
            <h3 class="text-xl font-semibold text-gray-800 mb-4">Your Progress</h3>
            <div class="grid grid-cols-1 md:grid-cols-4 gap-6">
                <div class="text-center">
                    <div class="text-2xl font-bold text-[var(--experian-blue)]" id="totalAttempts">0</div>
                    <div class="text-sm text-gray-600">Total Attempts</div>
                </div>
                <div class="text-center">
                    <div class="text-2xl font-bold text-green-600" id="correctAnswers">0</div>
                    <div class="text-sm text-gray-600">Correct Answers</div>
                </div>
                <div class="text-center">
                    <div class="text-2xl font-bold text-orange-600" id="averageScore">0%</div>
                    <div class="text-sm text-gray-600">Average Score</div>
                </div>
                <div class="text-center">
                    <div class="text-2xl font-bold text-purple-600" id="lastScore">-</div>
                    <div class="text-sm text-gray-600">Last Score</div>
                </div>
            </div>
        </div>

        <!-- Recent Activity Section -->
        <div class="bg-white rounded-lg shadow-lg p-6">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-xl font-semibold text-gray-800">Recent Activity</h2>
                <button onclick="clearHistory()" class="text-sm text-gray-500 hover:text-gray-700">Clear History</button>
            </div>
            
            <div id="activityList">
                <div class="text-center py-8 text-gray-500">
                    <svg class="h-12 w-12 mx-auto mb-4 text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path>
                    </svg>
                    <p>No quiz attempts yet. Start your first challenge!</p>
                </div>
            </div>
        </div>
    </main>

    <!-- JavaScript -->
    <script>
        // Dashboard controller
        class Dashboard {
            constructor() {
                this.userStats = {
                    totalAttempts: 0,
                    correctAnswers: 0,
                    averageScore: 0,
                    lastScore: null,
                    history: []
                };
                this.initialize();
            }

            initialize() {
                // Check authentication
                if (!sessionStorage.getItem('isLoggedIn')) {
                    window.location.href = 'index.html';
                    return;
                }
                
                // Load user data
                this.loadUserData();
                this.updateUI();
                this.loadUserStats();
            }

            loadUserData() {
                const username = sessionStorage.getItem('username') || 'User';
                const loginTime = sessionStorage.getItem('loginTime');
                
                // Update username display
                document.getElementById('username').textContent = username;
                
                // Generate user initials
                const initials = this.generateInitials(username);
                document.getElementById('userInitials').textContent = initials;
                
                // Update session time
                if (loginTime) {
                    const sessionStart = new Date(loginTime);
                    document.getElementById('sessionTime').textContent = 
                        sessionStart.toLocaleString();
                }
            }

            generateInitials(name) {
                return name
                    .split(' ')
                    .map(part => part.charAt(0).toUpperCase())
                    .slice(0, 2)
                    .join('');
            }

            loadUserStats() {
                // Load stats from localStorage (will be replaced with API later)
                const savedStats = localStorage.getItem(`userStats_${sessionStorage.getItem('username')}`);
                if (savedStats) {
                    this.userStats = JSON.parse(savedStats);
                    this.updateStatsDisplay();
                    this.updateActivityList();
                }
            }

            updateStatsDisplay() {
                document.getElementById('totalAttempts').textContent = this.userStats.totalAttempts;
                document.getElementById('correctAnswers').textContent = this.userStats.correctAnswers;
                document.getElementById('averageScore').textContent = `${this.userStats.averageScore}%`;
                document.getElementById('lastScore').textContent = 
                    this.userStats.lastScore !== null ? `${this.userStats.lastScore}/5` : '-';
            }

            updateActivityList() {
                const activityList = document.getElementById('activityList');
                
                if (this.userStats.history.length === 0) {
                    activityList.innerHTML = `
                        <div class="text-center py-8 text-gray-500">
                            <svg class="h-12 w-12 mx-auto mb-4 text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path>
                            </svg>
                            <p>No quiz attempts yet. Start your first challenge!</p>
                        </div>
                    `;
                    return;
                }

                activityList.innerHTML = this.userStats.history
                    .slice(-5) // Show last 5 attempts
                    .reverse()
                    .map(attempt => `
                        <div class="flex items-center justify-between py-3 border-b border-gray-100 last:border-b-0">
                            <div class="flex items-center">
                                <div class="w-3 h-3 rounded-full ${attempt.score >= 4 ? 'bg-green-400' : attempt.score >= 3 ? 'bg-yellow-400' : 'bg-red-400'} mr-3"></div>
                                <div>
                                    <div class="font-medium text-gray-900">Knowledge Challenge</div>
                                    <div class="text-sm text-gray-500">${new Date(attempt.date).toLocaleDateString()} at ${new Date(attempt.date).toLocaleTimeString()}</div>
                                </div>
                            </div>
                            <div class="text-right">
                                <div class="font-semibold ${attempt.score >= 4 ? 'text-green-600' : attempt.score >= 3 ? 'text-yellow-600' : 'text-red-600'}">${attempt.score}/5</div>
                                <div class="text-sm text-gray-500">${Math.round((attempt.score/5)*100)}%</div>
                            </div>
                        </div>
                    `).join('');
            }

            updateUI() {
                // Add any UI updates here
                console.log('Dashboard UI updated');
            }

            saveUserStats() {
                localStorage.setItem(`userStats_${sessionStorage.getItem('username')}`, JSON.stringify(this.userStats));
            }

            // This will be called when user returns from quiz
            addQuizResult(score, totalQuestions = 5) {
                this.userStats.totalAttempts++;
                this.userStats.correctAnswers += score;
                this.userStats.lastScore = score;
                
                // Calculate average score
                this.userStats.averageScore = Math.round((this.userStats.correctAnswers / (this.userStats.totalAttempts * totalQuestions)) * 100);
                
                // Add to history
                this.userStats.history.push({
                    date: new Date().toISOString(),
                    score: score,
                    totalQuestions: totalQuestions
                });

                this.saveUserStats();
                this.updateStatsDisplay();
                this.updateActivityList();
            }

            clearHistory() {
                if (confirm('Are you sure you want to clear your quiz history?')) {
                    this.userStats = {
                        totalAttempts: 0,
                        correctAnswers: 0,
                        averageScore: 0,
                        lastScore: null,
                        history: []
                    };
                    this.saveUserStats();
                    this.updateStatsDisplay();
                    this.updateActivityList();
                }
            }
        }

        // Global dashboard instance
        let dashboard;

        // Initialize dashboard
        document.addEventListener('DOMContentLoaded', function() {
            dashboard = new Dashboard();
        });

        // Navigation functions
        function startQuiz() {
            window.location.href = 'quiz.html';
        }

        function browseKnowledge() {
            // For now, show coming soon
            alert('Knowledge Center coming soon! Focus on completing quiz challenges for now.');
        }

        function logout() {
            if (confirm('Are you sure you want to logout?')) {
                sessionStorage.clear();
                window.location.href = 'index.html';
            }
        }

        function clearHistory() {
            dashboard.clearHistory();
        }

        // Check for returning quiz results
        window.addEventListener('storage', function(e) {
            if (e.key && e.key.startsWith('quizResult_')) {
                const result = JSON.parse(e.newValue);
                dashboard.addQuizResult(result.score, result.totalQuestions);
                localStorage.removeItem(e.key); // Clean up
            }
        });

        // Keyboard shortcuts
        document.addEventListener('keydown', (e) => {
            if (e.ctrlKey && e.shiftKey && e.key === 'L') {
                logout();
            }
            if (e.ctrlKey && e.key === 'Enter') {
                startQuiz();
            }
        });
    </script>
</body>
</html>